<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <title>render function</title>
   <script type="text/javascript" src="compiler/lex.js"></script>
   <script type="text/javascript" src="compiler/parser.js"></script>
</head>
<body>
	<div id="root"></div>
</body>
<script>

    var value = `    
    <ul id='main'>
      <li class='my-list'>
            <h1>{a.name} -  {a.id}</h1> 
            <ul>
                <li>
                 <b>{c.id}  {c.type}</b>  
                </li>
            </ul>
        </li>
    </ul>   `

   applier = function(value) {
        var alldata = lexical_analysis(value);
        alldata.forEach((el , ind )=> {
            if(el.type == 'text' && el.value.trim().length > 0){
                // var splits = cs(alldata[ind].value);
                // alldata.splice(ind, 1);
                // splits.forEach((sp , indx) => {
                //     var replacer = Neww(sp);
                //     alldata.splice((ind + indx), 0, replacer );
                // });
            }else if(el.type == 'text' && el.value.trim().length <= 0){
              alldata.splice(ind , 1)
            }  
        });  
        return(parser(alldata));
    },

    Mygenerator = function Mygenerator(a) {
        return GenerateRenderFunction(a);
    },
    
    syntax = function syntax(type , props , child) {
      return 'm("'+type+'",'+JSON.stringify(props)+','+(child)+')';    
    },

    GenerateRenderFunction = function GenerateRenderFunction(x) {
        var store         = [];
        if(typeof(x) == 'object'){
            var children  = x.children;
            for (let i = 0; i < children.length; i++) {
                var el = children[i];
                data = GenerateRenderFunction(el);
                store.push(syntax(el.type , el.props , data))
            }
        }else{
            store.push(x)
        }
        
        return(store);
    }

    

   var AST = applier(value);//Ast of HTML //this need to be converted to render function
   var datax = Mygenerator(AST)//trying to generate render function //my try
console.log(datax[0])
//console.log(datax)

//render Function:-
//
//
// render(
//   "ul",
//   { id: "main" },
//   render(
//     "li",
//     { class: "my-list" },
//     render("h1", null, a.name, " -  ", a.id),
//     render(
//       "ul",
//       null,
//       render(
//         "li",
//         null,
//         render("b", null, c.id, "  ", c.type)
//       )
//     )
//   )
// );
//
//
//
//html that need to be converted to render functions:-
//
// <ul id='main'>
//       <li class='my-list'>
//             <h1>{a.name} -  {a.id}</h1> 
//             <ul>
//                 <li>
//                  <b>{c.id}  {c.type}</b>  
//                 </li>
//             </ul>
//         </li>
//     </ul> 





   
</script>
</html>
